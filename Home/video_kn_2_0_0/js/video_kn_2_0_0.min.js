const queryVideo=async()=>{const e=await fetch("https://benhvienthammykangnam.vn/wp-json/wp/v2/pages/257729"),i=await e.json(),n=i.acf.group_page_field.body_custom,_=n.filter(e=>"video_kn_2_0_0"===e.acf_fc_layout),o=[];return _[0].cate.map(e=>{let i={};const n=[];e.cate.map(e=>{let i={};const _=e.cate_list.split("\r\n");i={season:_[0],episode:_[1],link:_[2],thumb:_[3],alt:_[4]},n.push(i)});const _=e.cate_info.split("\r\n");i={category:_[0],description:_[1],thumb:_[2],alt:_[3],item:n},o.push(i)}),o};let cateIndexVideo=0,tabsVideo=[],video_kn_2_0_0_data=[];const getThumbYoutube=e=>{let i=e.split("v=")[1];const n=i.indexOf("&");return-1!=n&&(i=i.substring(0,n)),`https://img.youtube.com/vi/${i}/maxresdefault.jpg`},getIdYoutube=e=>{let i=e.split("v=")[1];const n=i.indexOf("&");return-1!=n&&(i=i.substring(0,n)),i},filterDataVideo=e=>video_kn_2_0_0_data.filter(i=>i.category===e),handleCateVideo=e=>{cateVideo=e,cateIndexVideo=tabsVideo.indexOf(e),renderVideo()},nextCateVideo=()=>{cateIndexVideo<tabsVideo.length-1?cateIndexVideo++:cateIndexVideo=0,cateVideo=tabsVideo[cateIndexVideo],renderVideo()},preCateVideo=()=>{cateIndexVideo>0?cateIndexVideo--:cateIndexVideo=tabsVideo.length-1,cateVideo=tabsVideo[cateIndexVideo],renderVideo()},nextCateVideoMb=()=>{cateIndexVideo<tabsVideo.length-1?cateIndexVideo++:cateIndexVideo=0,cateVideo=tabsVideo[cateIndexVideo],renderVideoMb()},preCateVideoMb=()=>{cateIndexVideo>0?cateIndexVideo--:cateIndexVideo=tabsVideo.length-1,cateVideo=tabsVideo[cateIndexVideo],renderVideoMb()},renderCate=()=>{document.querySelector(".video_kn_2_0_0__categories").innerHTML=` \n    <button onclick="preCateVideo()">❮</button>\n    <ul>\n    ${tabsVideo.map(e=>`<li class="${cateVideo===e?"video_kn_2_0_0__category--active":""}" onclick="handleCateVideo('${e}')">${e}</li>`).join("")}\n    </ul>\n    <button onclick="nextCateVideo()">❯</button>`},renderCateMb=()=>{document.querySelector(".video_kn_2_0_0__categories").innerHTML=` \n    <button onclick="preCateVideoMb()">❮</button>\n    <ul>\n    ${tabsVideo.map(e=>`<li class="${cateVideo===e?"video_kn_2_0_0__category--active":""}">${e}</li>`).join("")}\n    </ul>\n    <button onclick="nextCateVideoMb()">❯</button>`},removeDuplicate=e=>e.filter((i,n)=>e.indexOf(i)===n),renderSeasonEp=(e,i)=>{function n(e,i){return Object.keys(e).find(n=>e[n]===i)}let _="";i&&(_=document.querySelector(`.${i}`).value);const o=[],t=[],d=filterDataVideo(e);d[0].item.map(e=>o.push(e.season));const a=removeDuplicate(o),s=d[0].item.filter(e=>e.season===a[i?n(a,_):0]);s.map(e=>t.push(e.episode));let c="",l="";a.map(e=>c+=`\n        <option value="${e}">${e}</option>\n    `),t.map(e=>l+=`\n        <option value="${e}">${e}</option>\n    `),i||(document.querySelector(".video_kn_2_0_0__selectChoice--ss").innerHTML=c),document.querySelector(".video_kn_2_0_0__selectChoice--ep").innerHTML=l,i&&renderVideoLink(e,i,"video_kn_2_0_0__selectChoice--ep")},renderVideoLink=(e,i,n)=>{const _=filterDataVideo(e);let o=_[0].item[0].season,t=_[0].item[0].episode;i&&(o=document.querySelector(`.${i}`).value),n&&(t=document.querySelector(`.${n}`).value);const d=_[0].item.filter(e=>e.season===o&&e.episode===t);document.querySelector(".video_kn_2_0_0 .video_kn_2_0_0__video").innerHTML=`\n        <div class="video_kn_2_0_0__thumb"><img width="664" height="363" src="${d[0].thumb?d[0].thumb:getThumbYoutube(d[0].link)}" alt="${d[0].alt}"><a href="${d[0].link}" class="video_kn_2_0_0__play" target="_blank" aria-label="play"><img width="208" height="208" src="${video_kn_2_0_0_url}images/play.png" alt="${d[0].alt}"></a></div>\n        <div class="video_kn_2_0_0__title">\n            <span class="video_kn_2_0_0__name">${_[0].category}</span>\n            <span class="video_kn_2_0_0__ep">${d[0].episode}</span>\n        </div>\n    `},renderVideoBox=e=>{const i=e[0];document.querySelector(".video_kn_2_0_0 .video_kn_2_0_0__inner").classList.remove("video_kn_2_0_0__inner1"),document.querySelector(".video_kn_2_0_0 .video_kn_2_0_0__inner").innerHTML=`\n    <div class="video_kn_2_0_0__select">\n        <div class="video_kn_2_0_0__thumbCate">\n            <img width="271" height="275" src="${i.thumb}" alt="${i.alt}">\n        </div>\n        <div class="video_kn_2_0_0__selectVideo">\n            <select class="video_kn_2_0_0__selectChoice video_kn_2_0_0__selectChoice--ss" onchange="renderSeasonEp('${cateVideo}', 'video_kn_2_0_0__selectChoice--ss')"></select>\n            <select class="video_kn_2_0_0__selectChoice video_kn_2_0_0__selectChoice--ep" onchange="renderVideoLink('${cateVideo}', 'video_kn_2_0_0__selectChoice--ss', 'video_kn_2_0_0__selectChoice--ep')"></select>\n        </div>\n        <p class="video_kn_2_0_0__desc">\n            ${i.description}\n        </p>\n    </div>\n    <div class="video_kn_2_0_0__video"></div>\n    `,renderSeasonEp(cateVideo),renderVideoLink(cateVideo)},renderVideoLinkMB=(e,i,n)=>{const _=filterDataVideo(e),o=_[0].item.filter(e=>e.season===i&&e.episode===n);document.querySelector(".video_kn_2_0_0 .video_kn_2_0_0__video").innerHTML=`\n        <div class="video_kn_2_0_0__thumb"><img width="664" height="363" src="${o[0].thumb?o[0].thumb:getThumbYoutube(o[0].link)}" alt="${o[0].alt}"><a href="${o[0].link}" class="video_kn_2_0_0__play" target="_blank" aria-label="play"><img width="208" height="208" src="${video_kn_2_0_0_url}images/play.png" alt="${o[0].alt}"></a></div>\n        <div class="video_kn_2_0_0__title">\n            <span class="video_kn_2_0_0__name">${_[0].category}</span>\n            <span class="video_kn_2_0_0__ep">${o[0].episode}</span>\n        </div>\n    `},renderVideoBoxMb=e=>{let i="";for(let n=0;n<e.length;n++)for(let _=0;_<e[n].item.length;_++)i+=`\n            <div>\n            <div class="video_kn_2_0_0__item" onclick="renderVideoLinkMB('${e[n].category}', '${e[n].item[_].season}', '${e[n].item[_].episode}')">\n                <div class="video_kn_2_0_0__titleItem">${e[n].category} <br> ${e[n].item[_].season} ${e[n].item[_].episode}</div>\n                <div class="video_kn_2_0_0__thumb">\n                    <img width="271" height="275" src="${e[n].thumb}" alt="${e[n].item[_].alt}">\n                </div>\n            </div>\n            </div>\n            `;document.querySelector(".video_kn_2_0_0 .video_kn_2_0_0__inner1").innerHTML=`\n    <div class="video_kn_2_0_0__select">${i}</div>\n    <div class="video_kn_2_0_0__video"></div>\n    `;const n=filterDataVideo(cateVideo);renderVideoLinkMB(cateVideo,n[0].item[0].season,n[0].item[0].episode)},renderVideo=()=>{if(renderCate(),"Kangnam"===cateVideo){const e=filterDataVideo(cateVideo);renderVideoCateKangnam(e[0])}else renderVideoBox(filterDataVideo(cateVideo))},renderVideoMb=()=>{if(renderCateMb(),"Kangnam"===cateVideo){const e=filterDataVideo(cateVideo);renderVideoCateKangnam(e[0])}else renderVideoBoxMb(filterDataVideo(cateVideo))},renderVideoCateKangnam=e=>{const i=e.item.slice(1).map(e=>`\n        <div class="video_kn_2_0_0__single" onclick="modalVid('${getIdYoutube(e.link)}')">\n        <div class="video_kn_2_0_0__thumbnail">\n        <img width="664" height="363" src="${e.thumb?e.thumb:getThumbYoutube(e.link)}" alt="">\n        </div>\n        <div class="video_kn_2_0_0__open"></div>\n        <div class="video_kn_2_0_0__text">${e.alt}</div>\n        </div>\n        `);document.querySelector(".video_kn_2_0_0 .video_kn_2_0_0__inner").classList.add("video_kn_2_0_0__inner1"),document.querySelector(".video_kn_2_0_0 .video_kn_2_0_0__inner").innerHTML=`\n    <div>\n        <div class="video_kn_2_0_0__main">\n            <div class="video_kn_2_0_0__content">${e.description}</div>\n            <div class="video_kn_2_0_0__vidMain" onclick="modalVid('${getIdYoutube(e.item[0].link)}')">\n                <div class="video_kn_2_0_0__thumbnail">\n                    <img width="664" height="363" src="${e.item[0].thumb?e.item[0].thumb:getThumbYoutube(e.item[0].link)}" alt="">\n                </div>\n                <div class="video_kn_2_0_0__open"></div>\n            </div>\n        </div>\n        <div class="video_kn_2_0_0__list">\n            <div class="video_kn_2_0_0__scroll">${i.join("")}</div>\n        </div>\n    </div>\n    `,funcDrag(".video_kn_2_0_0__list")},modalVid=e=>{document.body.insertAdjacentHTML("beforeend",`\n    <div class="modal modal-clipBox" id="modal-clip" style="display:flex">\n        <div class="modal-closePic" id="modal-closePic" onclick="removeModal('modal-clip')">×</div>\n        <div class="modal-box modal-box-video animate-zoom">\n            <div class="modal-video">\n                <iframe id="youtube" src="//www.youtube-nocookie.com/embed/${e}?rel=0&amp;controls=1&amp;autoplay=1&amp;nocookie=true&amp;mute=true" frameborder="0" allowfullscreen=""></iframe>\n            </div>\n        </div>\n        <div class="modal-bg" id="modal-bg" onclick="removeModal('modal-clip')"></div>\n    </div>\n    `)},removeModal=e=>{document.getElementById(e).remove()};queryVideo().then(e=>{e.map(e=>tabsVideo.push(e.category)),video_kn_2_0_0_data=e,window.innerWidth<767?renderVideoMb():renderVideo()}).catch(e=>console.log(e));const funcDrag=e=>{let i,n,_=!1;const o=document.querySelector(e),t=e=>{_=!0,i=e.pageX-o.offsetLeft,n=o.scrollLeft},d=e=>{_=!1,document.querySelector(".video_kn_2_0_0__scroll").classList.remove("hide")},a=e=>{if(!_)return;document.querySelector(".video_kn_2_0_0__scroll").classList.add("hide");const t=e.pageX-o.offsetLeft,d=t-i;o.scrollLeft=n-d};o.addEventListener("mousemove",a,!1),o.addEventListener("mousedown",t,!1),o.addEventListener("mouseup",d,!1),o.addEventListener("mouseleave",d,!1)};